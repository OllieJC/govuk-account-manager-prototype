<% resource_errors = resource.errors.messages.map { |field, errors| errors.map { |error| { field: field, error: error } } }.flatten %>

<% if resource.errors.any? %>
  <%= render "govuk_publishing_components/components/error_summary", {
    title: I18n.t("errors.messages.headline"),
    items: resource_errors.map { |item|
      {
        text: item[:error],
        href: "##{item[:field]}",
      }
    }
  } %>
<% end %>

<% if flash[:alert] %>
  <%= render "govuk_publishing_components/components/error_summary", {
    title: I18n.t("errors.messages.headline"),
    items: [
      {
        text: flash[:alert],
      }
    ]
  } %>
<% end %>
